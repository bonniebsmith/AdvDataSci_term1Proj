---
title: 'Class Project: Analysis of PLOS Analyses'
author: "Bonnie Smith"
date: "September 11, 2017"
output:
  html_document: default
  pdf_document: default
---

**Question:** 

In this project, we perform an analysis of the statistical techniques used in published Public Library of Science (PLoS) papers.  We identify the most common techniques and whether they vary by field, as well as trends over time.

**Background about PLoS:** 

The fields represented in Public Library of Science (PLoS) journals are Biology (since October 2003), Computational Biology (since June 2005), Neglected Tropical Disease (since October 2007), Medicine (since October 2004), Genetics (since July 2005), and Pathogens (since September 2005).

The `rplos` package, found in the `rplos` library, allows us to interface with the PLoS API directly in R.  The following are some notes on the `rplos` package: 

`searchplos(q='field:myquery',fl="field",fq="filter query")` is the base function.  Fields are listed in the data set `plosfields`---I will primarily be using the fields "journal" (full journal name, in quotes), "materials_and_methods", "publication_date", and "title".  

In our project we will be searching the Materials and Methods sections of PLoS papers for certain keywords, and we wish to stratify the results both by journal and by time.  As an example, suppose we are searching only for papers in the PLoS Pathogens journal which contain the word "regression" in their Materials and Methods sections.  If we want our query to return the title, journal, and publication date for each result, with the results sorted chronologically by publication date, then we have the following code:


```{r by_journal}

library(rplos)

searchplos(q="materials_and_methods:regression", fl=c("title","journal","publication_date"),
    fq= 'journal:"PLoS Pathogens"', sort='publication_date asc',limit=7)

```

**Data collection:**

To consider:  Will we bin results by date? e.g. by year/quarter/month?  We can also move through the chronologically-ordered dates using the following code:

```{r by_date}

searchplos(q="materials_and_methods:regression", fl=c("title","journal","publication_date"),
    fq= 'journal:"PLoS Pathogens"', sort='publication_date asc',start=5, limit=7)

```

Next we develop a strategy for forming our list of keywords to search.  We will take random samples of PLoS articles (by journal and time period), read in the Materials and Methods sections, and add to our list any statistical method that is mentioned.  We could then take further random samples (or the entire data, or the entire training set), and check how many articles contained zero of the proposed list of keywords, as a check for whether our putative list is fairly comprehensive.

The following code shows how many total (full-length) articles there are in each journal.  We then randomly sample integers from each portion.

```{r facets}

facetplos(q='*:*',facet.field='journal',fq='doc_type:full')

vec_1=sample(1000,4)
vec_2=sample(1001:2000,2)
vec_3=sample(2001:3000,2)
vec_3a=sample(3001:3399,2)
vec_4=sample(3001:4000,2)
vec_4a=sample(4001:4528,2)
vec_5=sample(4001:5000,2)
vec_5a=sample(5001:5365,2)
vec_5b=sample(5001:5682,2)
vec_6=sample(5001:6000,2)
vec_6a=sample(6001:6377,2)
vec_6b=sample(6001:6948,2)

```

We will fix the results.  

```{r samples}

vec_1_1000=c(399, 31, 119, 983)

vec_1001_2000=c(1822, 1779)

vec_2001_3000=c(2096, 2049)

vec_3001_3399=c(3191, 3222)

vec_3001_4000=c(3673, 3658)

vec_4001_4528=c(4210, 4340)

vec_4001_5000=c(4455, 4575)

vec_5001_5365=c(5046, 5030)

vec_5001_5682=c(5558, 5592)

vec_5001_6000=c(5297, 5585)

vec_6001_6377=c(6039, 6041)

vec_6001_6948=c(6058, 6715)
```


```{r  sampling}

#arts=searchplos(q="*:*", fl=c("title","journal","publication_date","materials_and_methods"),
    #  fq=list('journal:"PLoS Genetics"', 'doc_type:full'),sort='publication_date asc',start=6001, limit=6948)

#arts$data[vec_6001_6948,]

```

Pathogens articles:

399:  **Fisher's exact test**.  **Kaplan-Meier log rank test**.  Mann-Whitney t-test.  31: **Student's t-test**.  **One-way analysis of variance**.  119:  none mentioned.  983:  No MM section (correction)  1822:  One-way ANOVA.  Logrank Test.  t-test.  1779: none mentioned.  2096:  unpaired Student's t-test.  2049: none mentioned.  3673: **linear regression**, **ANOVA**, t-test.  3658:  none mentioned.  4455:  none mentioned.  4575:  student test.  Wilcoxon Mann-Whitney rank sum test.  **Chi-square test**.  5297:  One-way ANOVA.  Tukey's HSD.  Pairwise student's t-test.  5585:  No MM section.  6039:  Student's T-test.  **Mann-Whitney U-test (nonparametric statistics)**.  6041:  none mentioned.


Computational Biology articles:

399:  unsupervised learning.  hierarchical model.  31: none mentioned.  119:  No MM section.  983:  none mentioned.  1822:  No MM section.  1779: one-way ANOVA.  **linear regression**.  paired t-test.  linear state-space models.  2096:  none mentioned.  2049: Fisher's exact test. chi-square test.  motif.  3673: **Markov chain**.  3658:  none mentioned.  4455:  **least squares estimatio**n.  **singular value decomposition**.  t-test.  **Markov model**.  4575: **clustering algorithm.  K-means**.  5046:  No MM section.  5030:  No MM section

Neglected Tropical Diseases:

399:  **Cox proportional hazards model**.  Wald test.  31: Fixed effect model.  **Random effect model**.  119:  **Logistic regression**.  Pearson's chi-square.  983:  **Kaplan-Meier estimator**.  ANOVA.  backward elimination.   1822:  none mentioned.  1779: ANOVA.  2096: none mentioned.  2049: negative binomial regression.  **generalized linear models** (log-link function).  **maximum likelihood estimation**.  **logistic regression**.  3673: linear regression.  time series.  **autoregressive process**.  3658:  **principal components**.  paired t-test.  4455:  No MM section.  4575:  No MM section.  5558:  Poisson regression.  **likelihood ratio test**.  5592:  No MM section.

Biology articles:

399:  No MM section.  **31: Kaplan-Meier method**.  Log rank tests.  119:  No MM section.  983:  none mentioned.  1822:  One-way ANOVA.  Logrank Test.  t-test.  1779: none mentioned.  2096:  none mentioned.  2049: none mentioned.  3673: No MM section.  3658:  **adaptive management**.

Medicine articles:

399:  No MM section.  31:  No MM section.  119: **Wilcoxon rank sum test**.  unpaired t-test.  **Bonferroni correction**.  983:  No MM section.  1822:  none mentioned.  1779:  No MM section.  2096:  No MM section.  2049:  No MM section.  3191:  No MM section.  3222:  none mentioned.

Genetics articles:

399:  **Imputation**.  **Bayesian regression**.  Bayesian approach.  Jeffreys' prior.  **sensitivity analysis**.  **functional studies**.  **multiple imputation**.  31: Fisher exact test.  **Wilcoxon rank sum test**.  119:  none mentioned.  983:  Fisher exact test.  chi-square test.  1822:  none mentioned.  1779: No MM section.  2096:  No MM section.  2049: none mentioned.  3673: none mentioned.  3658:  ANOVA.  **Kruskall-Wallis**.  linear regression.  **non-linear regression**.  **AIC**.  **BIC**.  random effects.  **general linear model**.  Wilcoxon rank-sum test.  4455:  **bootstrap**.  Bayes.  AIC.  approximate likelihood ratio test.  chi-squared distribution.  4575:  none mentioned.  5297:  **Benjamini-Hochberg correction**.  **multiple testing**.  **Pearson correlation coefficient**.  5585:  none?  6058:  none mentioned.  6715: unpaired t-test.

**Draft list of keywords:**  

Fisher's exact test, Kaplan-Meier log rank test, t-test, linear regression, ANOVA, chi-square test, Markov model, singular value decomposition, clustering algorithm, K-means, Cox proportional hazards, random effects model, logistic regression, principal components, likelihood ratio test hierarchical model.  maximum likelihood estimation, general linear model, bootstrap, Bayesian regression


